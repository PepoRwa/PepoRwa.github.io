<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOWRAX.ME | Tactical Interface</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Share+Tech+Mono&family=Montserrat:ital,wght@0,400;0,700;1,900&display=swap" rel="stylesheet">
    <script src="/global.js" defer></script>
    
    <style>
        :root { --abyss: #020205; --magenta: #D62F7F; --void: #0B0C15; }
        
        body, html { 
            background: var(--abyss); 
            color: #fff; 
            margin: 0; 
            font-family: 'Montserrat', sans-serif; 
            min-height: 100vh; 
            width: 100%;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        #custom-cursor { 
            width: 30px; height: 30px; border: 1px solid var(--magenta); 
            position: fixed; pointer-events: none !important; z-index: 1000000; border-radius: 50%; 
            transition: transform 0.1s ease-out; transform: translate(-50%, -50%); 
            box-shadow: 0 0 15px var(--magenta); display: none;
        }
        #custom-cursor::after { content: ''; position: absolute; top: 50%; left: 50%; width: 4px; height: 4px; background: var(--magenta); border-radius: 50%; transform: translate(-50%, -50%); }
        
        @media (min-width: 1024px) { 
            body, html, * { cursor: none !important; } 
            #custom-cursor { display: block; } 
            body, html { overflow: hidden; height: 100vh; }
        }

        .bg-text-scroll { position: fixed; font-size: 12px; font-family: 'Share Tech Mono'; color: rgba(214, 47, 127, 0.03); white-space: nowrap; pointer-events: none; user-select: none; z-index: 1; }
        .scanline { width: 100%; height: 100px; z-index: 40; pointer-events: none; background: linear-gradient(0deg, rgba(214, 47, 127, 0) 0%, rgba(214, 47, 127, 0.08) 50%, rgba(214, 47, 127, 0) 100%); position: absolute; top: -100px; animation: scan 6s linear infinite; }
        @keyframes scan { 0% { top: -100px; } 100% { top: 100%; } }

        .glitch { animation: glitch 1s linear infinite; position: relative; }
        @keyframes glitch {
            2%, 64% { transform: translate(2px, 0) skew(0deg); }
            4%, 60% { transform: translate(-2px, 0) skew(0deg); }
            62% { transform: translate(0, 0) skew(5deg); }
        }

        .nav-link { transition: 0.4s; letter-spacing: 0.2em; position: relative; opacity: 0.6; }
        .nav-link:hover { color: var(--magenta); text-shadow: 0 0 10px var(--magenta); opacity: 1 !important; }
        
        .news-flash-card { 
            position: relative;
            z-index: 10;
            border-left: 2px solid rgba(214, 47, 127, 0.3); 
            background: linear-gradient(90deg, rgba(214, 47, 127, 0.05) 0%, transparent 100%); 
            transition: 0.5s; 
            pointer-events: auto;
        }
        .news-flash-card:hover { border-left-color: var(--magenta); transform: scale(1.02) translateX(5px); background: linear-gradient(90deg, rgba(214, 47, 127, 0.15) 0%, transparent 100%); }

        /* Styles des coins colorés restaurés */
        .hud-corner { position: absolute; width: 20px; height: 20px; border: 1px solid var(--magenta); pointer-events: none; opacity: 0.5; }
        .decoration-layer { pointer-events: none !important; }

        #mobile-nav { 
            display: none;
            background: rgba(2, 2, 5, 0.98);
            backdrop-filter: blur(20px);
        }
        #mobile-nav.active { display: flex; }
    </style>
</head>
<body class="bg-[#020205]">

    <div id="custom-cursor"></div>
    
    <div class="bg-text-scroll top-10 left-0 decoration-layer">SYSTEM_ERROR_LOG_UNITS_DECRYPTED_STATUS_ONLINE_DEPLOYMENT_READY</div>
    <div class="bg-text-scroll bottom-20 right-0 decoration-layer">GOWRAX_PROTOCOL_ALPHA_ACTIVE_SECURE_CONNECTION_GRANTED</div>

    <div id="bios-boot" class="fixed inset-0 bg-black z-[1000000] p-8 font-mono text-green-500 text-xs overflow-hidden pointer-events-none transition-opacity duration-500">
        <div id="boot-text"></div>
        <span class="inline-block w-2 h-4 bg-green-500 animate-pulse mt-2"></span>
    </div>

    <div id="player-container" style="position:absolute; top:-9999px;"><div id="yt-player"></div></div>
    <canvas id="starCanvas" class="fixed inset-0 z-0 decoration-layer"></canvas>

    <div id="main-ui" class="relative z-10 opacity-0 transition-opacity duration-[2000ms] flex flex-col min-h-screen border-x border-white/5 mx-auto max-w-[1920px]">
        <div class="scanline"></div>
        
        <header class="p-6 flex justify-between items-center border-b border-white/10 backdrop-blur-xl bg-black/40 z-[100]">
            <div class="flex items-center gap-4">
                <div class="w-8 h-8 border border-magenta rotate-45 flex items-center justify-center">
                    <div class="w-4 h-4 bg-magenta animate-pulse rotate-[-45deg]"></div>
                </div>
                <div class="font-rajdhani font-bold text-2xl text-white tracking-tighter uppercase leading-none">
                    GOWRAX<span class="text-magenta italic">_HQ</span>
                </div>
            </div>
            
            <nav class="hidden lg:flex space-x-10 text-[10px] font-bold tracking-[0.4em]">
                <a href="/" class="text-magenta underline underline-offset-8 decoration-2">INDEX</a>
                <a href="./news/index.html" class="nav-link">NEWS</a>
                <a href="./ceo/index.html" class="nav-link">COMMAND</a>
                <a href="./profiles/index.html" class="nav-link">DATABASE</a>
                <a href="./roster/index.html" class="nav-link">UNITS</a>
                <a href="./contact/index.html" class="nav-link">SIGNAL</a>
            </nav>

            <div class="flex items-center gap-6">
                <div class="hidden md:block text-right">
                    <div class="text-[8px] text-magenta font-mono uppercase tracking-widest">Security_Level</div>
                    <div class="text-[10px] font-bold font-mono">BETA_CLEARANCE</div>
                </div>
                <button onclick="toggleNav(true)" class="lg:hidden text-magenta border border-magenta/40 p-2 hover:bg-magenta hover:text-white transition-all z-[110] pointer-events-auto">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                </button>
            </div>
        </header>

        <main class="flex-1 flex flex-col relative overflow-hidden">
            <div class="absolute inset-0 flex items-center justify-center pointer-events-none decoration-layer">
                <div class="w-[85%] h-[75%] border border-white/5 relative">
                    <div class="hud-corner top-0 left-0 border-r-0 border-b-0"></div>
                    <div class="hud-corner top-0 right-0 border-l-0 border-b-0"></div>
                    <div class="hud-corner bottom-0 left-0 border-r-0 border-t-0"></div>
                    <div class="hud-corner bottom-0 right-0 border-l-0 border-t-0"></div>
                </div>
            </div>

            <div class="flex-1 flex flex-col items-center justify-center relative z-20">
                <div class="relative group" id="hero-card">
                    <h1 class="text-[20vw] font-rajdhani font-black tracking-tighter opacity-[0.02] select-none italic text-center leading-none">GRX-04</h1>
                    <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none">
                        <div class="mb-4 flex items-center gap-2 opacity-60">
                            <span class="w-8 h-[1px] bg-magenta"></span>
                            <span class="text-[10px] font-mono tracking-[0.5em] text-magenta uppercase">Established 2026</span>
                            <span class="w-8 h-[1px] bg-magenta"></span>
                        </div>
                        <h2 title="GOWRAX" class="glitch text-7xl md:text-[10rem] font-rajdhani font-bold tracking-tighter leading-none drop-shadow-[0_0_50px_rgba(214, 47, 127, 0.5)]">GOWRAX</h2>
                        <div class="mt-6">
                            <p class="font-mono text-white/80 tracking-[0.5em] text-[9px] md:text-xs uppercase bg-magenta/10 border border-magenta/20 px-8 py-3 backdrop-blur-xl">
                                Elite_Cyber_Roster // Unit_Deployment
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="w-full max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-4 gap-6 px-6 pb-12 relative z-30">
                <div class="lg:col-span-1 flex flex-col justify-center text-center lg:text-left">
                    <h3 class="font-rajdhani font-bold text-2xl italic text-magenta leading-none mb-2">BROADCAST</h3>
                    <p class="text-[10px] font-mono text-gray-500 uppercase tracking-widest">Rapports tactiques du front.</p>
                </div>
                <div id="news-feed" class="lg:col-span-3 grid grid-cols-1 md:grid-cols-3 gap-4"></div>
            </div>
        </main>

        <footer class="p-6 border-t border-white/10 bg-black/60 backdrop-blur-2xl flex flex-col md:flex-row justify-between items-center gap-4 z-[100]">
            <div class="flex items-center gap-8 text-[10px] font-mono text-gray-500 tracking-widest">
                <div class="flex items-center gap-2 uppercase"><span class="text-magenta">AUTH:</span> CRAZZYNEL</div>
                <div class="hidden sm:flex items-center gap-2"><span class="text-magenta">UPLINK:</span> <span class="text-green-500 animate-pulse">ESTABLISHED</span></div>
            </div>
            <div id="live-clock" class="text-xl font-rajdhani font-bold text-white tracking-widest">00:00:00</div>
        </footer>

        <div id="mobile-nav" class="fixed inset-0 z-[999999] p-12 flex flex-col justify-center items-center space-y-8 opacity-0 pointer-events-none transition-all duration-500">
            <button onclick="toggleNav(false)" class="absolute top-10 right-10 text-magenta font-mono text-sm border border-magenta/40 px-6 py-2 uppercase pointer-events-auto">Close_X</button>
            <a href="/" class="text-4xl font-rajdhani font-bold text-magenta italic pointer-events-auto" onclick="toggleNav(false)">INDEX</a>
            <a href="./news/index.html" class="text-2xl font-rajdhani tracking-widest pointer-events-auto" onclick="toggleNav(false)">NEWS</a>
            <a href="./ceo/index.html" class="text-2xl font-rajdhani tracking-widest pointer-events-auto" onclick="toggleNav(false)">COMMAND</a>
            <a href="./profiles/index.html" class="text-2xl font-rajdhani tracking-widest pointer-events-auto" onclick="toggleNav(false)">DATABASE</a>
            <a href="./roster/index.html" class="text-2xl font-rajdhani tracking-widest pointer-events-auto" onclick="toggleNav(false)">ROSTERS</a>
            <a href="./contact/index.html" class="text-2xl font-rajdhani tracking-widest border border-magenta/40 px-10 py-3 text-magenta pointer-events-auto" onclick="toggleNav(false)">SIGNAL</a>
        </div>
    </div>

<div id="status-overlay" class="fixed inset-0 z-[15000] flex items-center justify-center bg-black/90 backdrop-blur-xl opacity-0 pointer-events-none transition-all duration-700">
        <div id="status-modal" class="max-w-lg w-full mx-4 bg-[#050508] border-t-2 border-magenta p-10 shadow-[0_30px_100px_rgba(214,47,127,0.3)] relative pointer-events-auto">
            <div class="text-[10px] font-mono text-magenta mb-8 tracking-[0.8em] uppercase italic">Priority_Transmission // GOWRAX_V4</div>
            
            <div class="space-y-8">
                <h3 class="text-3xl font-rajdhani font-bold leading-tight uppercase italic underline decoration-magenta/40">Système mis à jour.</h3>
                <p class="text-sm text-gray-400 font-mono leading-relaxed italic">
                    "La nouvelle interface GOWRAX est désormais opérationnelle. Visuels épurés, graphismes haute fidélité et performances accrues : nous passons au niveau supérieur. <br><br>
                    <span class="text-magenta font-bold">INFO TACTIQUE :</span> Le nouveau roster <span class="text-white">Counter-Strike 2</span> a été déployé dans la base de données. Bonne navigation."
                </p>
                
                <div class="flex justify-between items-center pt-8 border-t border-white/5">
                    <div class="font-mono">
                        <span class="block text-xs text-magenta font-bold uppercase tracking-tighter">Crazzynel</span>
                        <span class="block text-[9px] text-gray-600 uppercase italic">Commanding Officer</span>
                    </div>
                    <button onclick="closePopup()" class="bg-transparent border border-magenta text-magenta px-8 py-3 text-[10px] font-bold uppercase tracking-[0.3em] hover:bg-magenta hover:text-white transition-all duration-500 pointer-events-auto">Accéder à la V4</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const SUPABASE_URL = 'https://nvtcjaallxoweujbyhng.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im52dGNqYWFsbHhvd2V1amJ5aG5nIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4NDc4OTEsImV4cCI6MjA4NzQyMzg5MX0.a0FkgYwG3yxu0GMXA6wV-6GqFamB9Pu-E57_z6KkHik';
        const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

        async function fetchLastNews() {
            const { data: posts, error } = await _supabase.from('posts').select('*').order('created_at', { ascending: false }).limit(3);
            if (!error && posts) {
                document.getElementById('news-feed').innerHTML = posts.map(post => `
                    <a href="./news/post.html?slug=${post.slug}" class="news-flash-card p-6 group flex flex-col justify-between h-40 pointer-events-auto">
                        <div class="text-[9px] text-magenta/60 font-mono mb-2 italic">DATE: ${new Date(post.created_at).toLocaleDateString()}</div>
                        <div class="text-sm font-rajdhani font-bold group-hover:text-magenta transition uppercase leading-tight line-clamp-2 italic">${post.title}</div>
                        <div class="mt-4 text-[8px] font-mono text-gray-600 uppercase tracking-tighter">Read_Log >></div>
                    </a>
                `).join('');
            }
        }

        function toggleNav(state) { 
            const nav = document.getElementById('mobile-nav');
            if(state) {
                nav.classList.add('active');
                setTimeout(() => {
                    nav.style.opacity = '1';
                    nav.style.pointerEvents = 'auto';
                }, 10);
            } else {
                nav.style.opacity = '0';
                nav.style.pointerEvents = 'none';
                setTimeout(() => nav.classList.remove('active'), 500);
            }
        }
        
        function closePopup() { 
            const overlay = document.getElementById('status-overlay'); 
            overlay.style.opacity = '0'; 
            overlay.style.pointerEvents = 'none'; 
            setTimeout(() => { overlay.style.display = 'none'; }, 700);
        }

        const bootMessages = ["> GOWRAX_OS v4.0.1", "> CORE: INITIALIZED", "> STARMAP: MAPPED", "> DATABASE: SYNCED", "> READY FOR DEPLOYMENT"];
        let line = 0;
        function runBios() {
            const container = document.getElementById('boot-text');
            if (line < bootMessages.length) {
                let p = document.createElement('p'); p.textContent = bootMessages[line];
                container.appendChild(p); line++;
                setTimeout(runBios, 80);
            } else {
                setTimeout(() => {
                    const bios = document.getElementById('bios-boot');
                    bios.style.opacity = '0';
                    setTimeout(() => bios.style.display = 'none', 500);
                    document.getElementById('main-ui').style.opacity = '1';
                    fetchLastNews();
                    setTimeout(() => {
                        const status = document.getElementById('status-overlay');
                        status.style.opacity = '1';
                        status.style.pointerEvents = 'auto';
                    }, 1200); 
                }, 500);
            }
        }
        window.onload = runBios;

        const cursor = document.getElementById('custom-cursor');
        window.addEventListener('mousemove', e => {
            cursor.style.left = e.clientX + 'px'; 
            cursor.style.top = e.clientY + 'px'; 
            if(window.innerWidth >= 1024) { 
                const x = (window.innerWidth/2 - e.pageX)/100; 
                const y = (window.innerHeight/2 - e.pageY)/100;
                const heroCard = document.getElementById('hero-card');
                if(heroCard) heroCard.style.transform = `perspective(1000px) rotateY(${x}deg) rotateX(${y}deg)`;
            }
        });

        setInterval(() => { document.getElementById('live-clock').innerText = new Date().toLocaleTimeString(); }, 1000);

        const canvas = document.getElementById('starCanvas');
        const ctx = canvas.getContext('2d');
        let stars = [];
        function initStars() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            stars = [];
            for(let i=0; i<200; i++) stars.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, s:Math.random()*1.2, op:Math.random(), sp:Math.random()*0.02});
        }
        function animateStars() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            stars.forEach(s => { s.op += s.sp; if(s.op > 1 || s.op < 0) s.sp *= -1; ctx.fillStyle = `rgba(255,255,255,${s.op})`; ctx.fillRect(s.x, s.y, s.s, s.s); });
            requestAnimationFrame(animateStars);
        }
        initStars(); animateStars(); window.addEventListener('resize', initStars);

        var player; var audioStarted = false;
        function onYouTubeIframeAPIReady() { 
            player = new YT.Player('yt-player', { 
                height: '0', width: '0', videoId: '4xDzrJKXOOY', 
                playerVars: { 'autoplay': 1, 'loop': 1, 'playlist': '4xDzrJKXOOY', 'mute': 1 } 
            }); 
        }
        window.addEventListener('click', () => { if(player && !audioStarted) { player.unMute(); player.setVolume(10); audioStarted = true; } });
        var tag = document.createElement('script'); tag.src = "https://www.youtube.com/iframe_api";
        document.head.appendChild(tag);
    </script>
</body>
</html>